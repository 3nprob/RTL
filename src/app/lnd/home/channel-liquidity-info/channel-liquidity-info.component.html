<div fxLayout="column" fxLayoutAlign="start stretch" fxFlex="100" [ngClass]="{'mb-4': screenSize === screenSizeEnum.XS || screenSize === screenSizeEnum.SM, 'mb-2': screenSize === screenSizeEnum.MD, 'mb-1': screenSize === screenSizeEnum.LG || screenSize === screenSizeEnum.XL}">
  <div fxLayout="column" fxFlex="9" fxLayoutAlign="end start">
    <span class="dashboard-capacity-header this-channel-capacity">Total Capacity</span>
    <mat-hint class="font-size-90">{{totalLiquidity | number}} Sats</mat-hint>
    <mat-progress-bar class="dashboard-progress-bar this-channel-bar" mode="determinate" color="accent" value="100"></mat-progress-bar>
  </div>
  <div fxLayout="column" fxFlex="3" fxLayoutAlign="end stretch"><mat-divider class="dashboard-divider"></mat-divider></div>
  <div [perfectScrollbar] *ngIf="allChannels && allChannels.length > 0; else noChannelBlock">
    <div *ngFor="let channel of allChannels" fxLayout="column">
      <span class="dashboard-capacity-header mt-2" matTooltip="{{channel.remote_alias || channel.remote_pubkey}}" matTooltipDisabled="{{(channel.remote_alias || channel.remote_pubkey).length < 26}}">{{(channel.remote_alias || channel.remote_pubkey) | slice:0:24}}{{(channel.remote_alias || channel.remote_pubkey).length > 25 ? '...' : ''}}</span>
      <div fxLayout="row" fxFlex="100" fxLayoutAlign="space-between start">
        <mat-hint *ngIf="direction === 'In'" class="font-size-90 color-primary"><strong class="font-weight-900 mr-5px">Capacity: </strong>{{channel.remote_balance || 0 | number}} Sats</mat-hint>
        <div *ngIf="direction === 'Out'" fxLayout="row" fxFlex="100" fxLayoutAlign="start center">
          <mat-hint fxFlex="75" fxLayoutAlign="start start" class="font-size-90 color-primary"><strong class="font-weight-900 mr-5px">Capacity: </strong>{{channel.local_balance || 0 | number}} Sats</mat-hint>
          <div *ngIf="showLoop && showBoltz" fxFlex="25" fxLayoutAlign="end end">
            <mat-select [(ngModel)]="selectedSwapService" (selectionChange)="onSwapOut(channel)" placeholder="Swaps" name="swap_services" tabindex="1" class="mr-0">
              <mat-option *ngFor="let swapServiceType of swapServiceTypes" [value]="swapServiceType">
                {{swapServiceType}}
              </mat-option>
            </mat-select>
          </div>
          <button *ngIf="showLoop && !showBoltz" fxFlex="25" fxLayoutAlign="end end" class="button-link-dashboard" color="primary" mat-button aria-label="Loop Out" (click)="onSwapOut(channel)">Loop Out</button>
          <button *ngIf="showBoltz && !showLoop" fxFlex="25" fxLayoutAlign="end end" class="button-link-dashboard" color="primary" mat-button aria-label="Loop Out" (click)="onSwapOut(channel)">Swap Out</button>
        </div>
      </div>
      <mat-progress-bar *ngIf="direction === 'In'" class="dashboard-progress-bar" mode="determinate" value="{{(totalLiquidity > 0) ? ((+channel.remote_balance || 0)/(totalLiquidity) * 100) : 0}}"></mat-progress-bar>
      <mat-progress-bar *ngIf="direction === 'Out'" class="dashboard-progress-bar" mode="determinate" value="{{(totalLiquidity > 0) ? ((+channel.local_balance || 0)/(totalLiquidity) * 100) : 0}}"></mat-progress-bar>
    </div>
  </div>
</div>
<ng-template #noChannelBlock>
  <div fxLayout="row" fxFlex="100" fxLayoutAlign="space-between center" class="mt-1">
    No channels available.
    <button *ngIf="direction === 'Out'" mat-stroked-button color="primary" (click)="goToChannels()" tabindex="1">Open Channel</button>
  </div>
</ng-template>
